<!DOCTYPE html>
<html>
    <head>
        <title>Tornado Chat Demo</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <link href="../static/chat.css" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js" type="text/javascript"></script>
    </head>
    <body>
        <div class="container">

            <div class="row shadow mt-4">
                <div class="badge" style="background-color: rgb(213, 248, 145);">
                    <p class="fs-1" style="color: black;">Welcome to Event Chat!</p> 
                </div>
            </div>

            <div class="row mt-5 text-center">
                <p>Put the instructions here</p>
            </div>
        </div>

        <div class="text-center">
            <!-- <form action="/match?workerId={{message['worker_id']}}" method="post" id="match_confirm">
                <input class="btn btn-primary" type="submit" name="start_match" value="Start Matching" onsubmit="showNotification()"/>
            </form> -->
            <input class="btn btn-primary" type="button" id="start_match" value="Start Matching" onclick="showNotificaiton()"/>
            <input type="hidden" id="workerId" value="{{message['worker_id']}}"/>
        </div>

        <div class="row mt-5 text-center" id="match_notification"></div>

        <script type="text/javascript">
            function showNotificaiton() {
                document.getElementById("match_notification").innerHTML = `<p class="fs-5" style="color: black;">This could take a few minutes...</p>
                <p class="fs-5" style="color: black;"> please read through the instruction again while waiting.</p>`;
                document.getElementById("start_match").disabled = true;
            }
            $("#start_match").on("click", function(e){
                e.preventDefault();
                $.ajax({
                    type: "POST",
                    url: "/match",
                    data: {
                        workerId : $("#workerId").val(),
                    },
                    success: function(result) {
                        window.location.href = `/room/id/${result['room_id']}?workerId=${$("#workerId").val()}`
                    },
                    error: function(result) {
                        alert('error');
                    }
                });
            });
        </script>
    </body>

    
</html>